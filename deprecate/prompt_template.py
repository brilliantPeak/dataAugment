
# 多意图模版
intention_prompt_template = """你是一个专业的医疗对话增强助手，请按照以下规则处理输入的医疗问诊对话：
    1. 保持Assistant部分的回复完全不变，原样保留
    2. 只对User部分的提问进行增强改写，要求：
       - 改写为不同表达方式（口语、书面语、添加细节等）
       - 保持核心意图不变
       - 可调整句式结构、用词风格
    3. 输出格式必须严格遵循：
       - 每轮对话包含一个User和一个Assistant
       - User部分是你改写后的内容
       - Assistant部分是原始内容，不做任何修改
       - 格式与输入示例完全一致
    请先参考以下示例然后再针对输入文本进行输出。

    这是一个例子:
    输入文本:User: 小狗为什么吐绿水Assistant: 您好，小狗吐绿水可能是由于以下几个原因：可能是胆汁反流、误食了不适性的植物或化学物质、胃肠炎症、肝功能问题或者是感染寄生虫导致的。
    不过，只靠这个简单的症状很难准确找出真正原因。是否可以了解更多您的宠物信息呢？User: 可以的，那您想先了解什么呢？Assistant: 谢谢您的配合。首先，我想了解一下您的宠物是什么品种的？
    User: 它是只法国斗牛犬。Assistant: 好的，请问您的小狗多大了？User: 它现在1岁半。Assistant: 了解了，您的小狗是公的还是母的？有没有做过绝育手术？User: 它是母的，没有做绝育。
    Assistant: 谢谢。请问小狗的免疫情况怎么样？所有的疫苗都按时接种了吗？User: 是的，所有的疫苗都按时接种。Assistant: 好的，那驱虫情况如何？定期进行驱虫吗？
    User: 我们定期做内外驱虫的，每三个月一次。Assistant: 非常好。那么最近小狗的饮食有发生改变吗？例如换了新的狗粮或者吃了人类的食物？User: 没有，这段时间它的饮食都没有变化。
    Assistant: 感谢回答。请问小狗的生活环境是否有发生变化？比如搬家或者家里来了新成员？User: 没有，环境一直都是老样子。
    Assistant: 好的，现在让我了解一下她的具体症状。除了吐绿水，它还有其他什么症状吗？比如腹泻、食欲不振、精神状态不佳？User: 有一点食欲不振，精神看起来也有些萎靡。
    Assistant: 非常感谢您提供的信息。请问小狗的饮水情况怎样？有没有明显的变化？比如喝水量增加或者减少？User: 她好像喝水量也不多了，比之前少了不少。
    Assistant: 好的，请问小狗的大小便情况正常吗？有没有出现拉稀或者便秘之类的情况？User: 最近拉稀比较严重。Assistant: 谢谢。请问有没有测过小狗的体温？如果有，能告诉我具体的数字吗？
    User: 没有测过她的体温。Assistant: 明白了，那么小狗的皮肤弹性如何？如果抓起颈部皮肤后松开，皮肤能迅速恢复原状吗？User: 感觉皮肤恢复得有点慢，像是有点脱水的样子。
    Assistant: 好的，最后，请您从主观上评估一下您觉得小狗的整体状态如何？User: 整体感觉状态很不好，看起来很没精神。
    Assistant: 谢谢您的详细描述。基于您提供的信息，我会先给出一个初步的综合性诊断小结，随后提供相应的建议。
    诊断小结：
    A. 鉴别诊断：
    1. 胆汁反流。
    2. 胃肠炎。
    3. 肝功能异常。
    4. 感染寄生虫。
    以上鉴别诊断只是根据问诊列出概率较大几种疾病，并非全部，请知晓。
    B. 治疗建议：
    - 暂时禁食，但可以适量提供干净饮用水，以防脱水。
    - 看看她是否有更严重的症状（如严重的呕吐或无排尿等症状），如有立刻行动。
    C. 就医建议：
    - 建议您尽快带小狗去看兽医，做一些必要的检查，如血液检查、X光检查，进一步明确病因。
    - 如果症状加重或者持续不见好转，务必立即就医。
    D. 日常护理：
    - 保持环境整洁卫生，防止误食有害物质。
    - 确保小狗有安静舒适的休息环境。
    - 观察小狗的症状变化，适时记录情况以便就医时提供给兽医参考。
    希望这些信息对您有帮助，有任何变化或新的疑问，欢迎随时联系我。请尽快带小狗去看兽医，祝愿她早日康复。

    输出文本:
    User:小狗吐绿水是咋回事啊？Assistant:您好，小狗吐绿水可能是由于以下几个原因：可能是胆汁反流、误食了不适性的植物或化学物质、胃肠炎症、肝功能问题或者是感染寄生虫导致的。
    不过，只靠这个简单的症状很难准确找出真正原因。是否可以了解更多您的宠物信息呢？User: 没问题啊，咱们先从哪里谈起呢？Assistant: 谢谢您的配合。首先，我想了解一下您的宠物是什么品种的？
    User: 这狗是法斗，法国斗牛犬。Assistant: 好的，请问您的小狗多大了？User: 一岁半吧，差不多。Assistant: 了解了，您的小狗是公的还是母的？有没有做过绝育手术？
    User: 母的，没绝育。Assistant: 谢谢。请问小狗的免疫情况怎么样？所有的疫苗都按时接种了吗？User: 疫苗都打了，按时打的。Assistant: 好的，那驱虫情况如何？定期进行驱虫吗？
    User: 三个月驱虫一次，内外都驱。Assistant: 非常好。那么最近小狗的饮食有发生改变吗？例如换了新的狗粮或者吃了人类的食物？User: 没换，跟以前一样吃。
    Assistant: 感谢回答。请问小狗的生活环境是否有发生变化？比如搬家或者家里来了新成员？User: 没变化，跟以前一样。Assistant: 好的，现在让我了解一下她的具体症状。除了吐绿水，它还有其他什么症状吗？
    比如腹泻、食欲不振、精神状态不佳？User: 吃得少点，没啥精神。Assistant: 非常感谢您提供的信息。请问小狗的饮水情况怎样？有没有明显的变化？比如喝水量增加或者减少？User: 喝水少了点。
    Assistant: 好的，请问小狗的大小便情况正常吗？有没有出现拉稀或者便秘之类的情况？User: 拉稀，拉得挺厉害的。Assistant: 谢谢。请问有没有测过小狗的体温？如果有，能告诉我具体的数字吗？
    User: 没量体温。Assistant: 明白了，那么小狗的皮肤弹性如何？如果抓起颈部皮肤后松开，皮肤能迅速恢复原状吗？User: 皮肤恢复慢，感觉有点干。
    Assistant: 好的，最后，请您从主观上评估一下您觉得小狗的整体状态如何？User: 状态不太好，没精神。Assistant: 谢谢您的详细描述。基于您提供的信息，我会先给出一个初步的综合性诊断小结，随后提供相应的建议。
    诊断小结：
    A. 鉴别诊断：
    1. 胆汁反流。
    2. 胃肠炎。
    3. 肝功能异常。
    4. 感染寄生虫。
    以上鉴别诊断只是根据问诊列出概率较大几种疾病，并非全部，请知晓。
    B. 治疗建议：
    - 暂时禁食，但可以适量提供干净饮用水，以防脱水。
    - 看看她是否有更严重的症状（如严重的呕吐或无排尿等症状），如有立刻行动。
    C. 就医建议：
    - 建议您尽快带小狗去看兽医，做一些必要的检查，如血液检查、X光检查，进一步明确病因。
    - 如果症状加重或者持续不见好转，务必立即就医。
    D. 日常护理：
    - 保持环境整洁卫生，防止误食有害物质。
    - 确保小狗有安静舒适的休息环境。
    - 观察小狗的症状变化，适时记录情况以便就医时提供给兽医参考。
    希望这些信息对您有帮助，有任何变化或新的疑问，欢迎随时联系我。请尽快带小狗去看兽医，祝愿她早日康复。

    
    注意:
    1. 严格保持输出格式为标准的多轮对话格式：
       - 每轮对话必须包含一个User和一个Assistant
       - 不能返回嵌套的对话结构（如数组或对象）
       - 每轮对话必须是独立的文本片段

    2. 只增强当前轮次的User提问：
       - 改写为不同表达方式（口语化、模糊化、添加细节等）
       - 保持核心意图不变
       - 可以调整句式结构、用词风格

    3. 严格保持Assistant回复不变：
       - Assistant部分的回复必须原样保留
       - 不能修改任何文字、标点或格式
       - 不能添加或删除任何内容

    4. 输出格式必须严格遵循：
       - 每轮对话以字典形式呈现，包含 `from` 和对应的内容字段。
       - `from` 为 `human` 时表示用户提问，内容为改写后的提问文本；`from` 为 `gpt` 时表示Assistant回复，内容为原始回复文本。
        {
        "conversations":[{
           "from": "human",
           "value": "[你改写后的User提问]"
         }
         {
           "from": "gpt",
           "content": "[原始Assistant回复，完全不变]"
         }]
        } 
       - 不能修改对话的轮次顺序或数量
    
    请处理以下输入对话：
    %s
    """
# 模糊表达
vague_prompt_template ="""根据以下标准医疗问诊对话，生成3-5条符合真实用户提问习惯的模糊表述，可包含口误、重复、信息不完整等问题。"""
# 噪声数据
noise_prompt_template ="""将以下标准医疗问诊对话转化为包含常见噪声的版本，噪声类型包括：1. 拼音近似字 2. 多余/遗漏标点 3. 语音识别错误 4. 字符乱序（如"最近饮食"→"近饮最近食"）"""
